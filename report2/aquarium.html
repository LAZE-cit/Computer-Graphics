<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>第２回課題</title>
    <!-- three.jsを読み込む(CDN)-->
    <script src="https://unpkg.com/three@0.137.4/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.137.4/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <script>
        var init = function(){

            var width = 1000, height = 750;

            //レンダラーの作成
            var renderer = new THREE.WebGLRenderer();
            renderer.setSize(width,height);
            document.body.appendChild(renderer.domElement);
            renderer.shadowMap.enabled = true;
            //背景色設定
            renderer.setClearColor(0xffffdd);

            //シーンの作成
            var scene = new THREE.Scene();

            // カメラを作成
            var camera = new THREE.PerspectiveCamera(45,width/height,1,1000);
            camera.position.set(30,15,0);
            const controls = new THREE.OrbitControls(camera, document.body);

            //helper
            const gridHelper = new THREE.GridHelper(2,10);
            scene.add(gridHelper);
            const axisHelper = new THREE.AxisHelper(20);
            scene.add(axisHelper);

            //箱の作成
            var geometry = new THREE.BoxGeometry(3,3,3);
            var material = new THREE.MeshLambertMaterial({color:0x0000ff});
            var box = new THREE.Mesh(geometry,material);
            box.castShadow = true;
            scene.add(box);
            
            //ライトの作成
            var light = new THREE.SpotLight({color:0xffffff});
            light.position.set(10,10,10);
            light.castShadow = true;
            light.shadow.mapSize.width = 2048;
            light.shadow.mapSize.height = 2048;
            scene.add(light);

            //初回実行
            var update = function(){
                requestAnimationFrame(update);
                renderer.render(scene,camera);

                box.rotation.x += 0.1;
                box.rotation.y += 0.1;
                box.rotation.z += 0.1;
            }
            update();
        }
        window.addEventListener('DOMContentLoaded',init);
    </script>
</body>
</html>